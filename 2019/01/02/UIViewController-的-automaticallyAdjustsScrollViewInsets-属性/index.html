<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Jerry's Blog | UIViewController 的 automaticallyAdjustsScrollViewInsets 属性</title><meta name="description" content=""><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="stylesheet" href="/css/main.css"><link rel="search" type="application/opensearchdescription+xml" href="https://mrhhsg.github.io/atom.xml" title="Jerry's Blog"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="container"><header class="main-header"><h1 class="main-header__title uplize"><a class="main-header__title__link" href="/">Jerry's Blog</a></h1><nav class="main-header__nav"><ul class="main-nav"><li class="main-nav__list"><a class="main-nav__list__link" href="/" target="_self">HOME</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/archives/" target="_self">ARCHIVE</a></li></ul></nav></header><main class="container__wrapper"><article class="article post"><h3 class="article__title">UIViewController 的 automaticallyAdjustsScrollViewInsets 属性</h3><div class="article__date metadata"><div class="post-info">2019/01/02</div></div><div class="article__tags metadata">Tags:
<a class="article__tags__link metadata" href="/tags/iOS/">iOS</a></div><div class="article__body"><h2 id="首先介绍一下最近遇到的一个问题："><a href="#首先介绍一下最近遇到的一个问题：" class="headerlink" title="首先介绍一下最近遇到的一个问题："></a>首先介绍一下最近遇到的一个问题：</h2><p><img src="https://i.loli.net/2019/01/02/5c2c50eb0a418.png" alt=""></p>
<p>通过上方截图可以看到文字上方有一空白区域（该现象在 iOS 11 之前的版本会出现），这并不是我想要的效果。该界面的 View 层级如下图：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c5203052e5.png" alt=""></p>
<p>以及 storyboard 中的布局如下：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c526d29d3b.png" alt=""></p>
<h2 id="automaticallyAdjustsScrollViewInsets-属性"><a href="#automaticallyAdjustsScrollViewInsets-属性" class="headerlink" title="automaticallyAdjustsScrollViewInsets 属性"></a>automaticallyAdjustsScrollViewInsets 属性</h2><p>看起来似乎一切正常，但是为什么实际界面会出现异常呢？通过多翻摸索，终于找到问题原因：<br>UIViewController 的 automaticallyAdjustsScrollViewInsets 属性如果为 true 就会出现这个问题，而这个属性的默认值就是 true，这个属性在 storyboard 中对应的选项是 “Adjust Scroll View Insets”，如下图：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c53a02e91a.png" alt=""></p>
<p>现在先将这个选项取消勾选运行一下试试：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c541be7f2d.png" alt=""></p>
<p>可以看到上方奇怪的空白消失了，看来这个 “Adjust Scroll View Insets” 属性是个“坏”属性！应该始终将它取消勾选？那么如果真是这样 Apple 为什么还要提供这个选项并且默认选中呢？</p>
<h2 id="“Adjust-Scroll-View-Insets”-的作用"><a href="#“Adjust-Scroll-View-Insets”-的作用" class="headerlink" title="“Adjust Scroll View Insets” 的作用"></a>“Adjust Scroll View Insets” 的作用</h2><p>“Adjust Scroll View Insets” 的作用其实就是其字面意思即：“调整 Scroll View 的内边距”。</p>
<p>先将前面界面的布局做一点小改动：将 UIScrollView 的 Top 从 “SafeArea.Top” 更改为 “SuperView.Top”，然后将 UIViewController 的 “Adjust Scroll View Insets” 属性勾选。运行一下：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c57f43c269.png" alt=""></p>
<p>得到的是一个正常的界面，和前面正常的界面似乎没有什么不同，事实上是这样吗？再来看看它的层级结构吧：</p>
<p><img src="https://i.loli.net/2019/01/02/5c2c587ab66c6.png" alt=""></p>
<p>这里 UIScrollView 其实是顶到界面顶部的，但是其内容却自动“下坠”到导航条之下，所以界面才会看起来正常，这就是 “Adjust Scroll View Insets” 的作用了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在 iOS 11之前的版本上 “Adjust Scroll View Insets” 这个属性不够“智能”，所以无论我们采用什么样的布局（Scroll View 直接到顶或者位于导航条下方）都会自动下坠其内容，因此当我们在布局的时候如果已经考虑了顶部的导航条和 status bar 的高度同时采用 “Adjust Scroll View Insets” 就会造成多余的空白情况</p>
<p>至于用不用这个属性，可以根据自己的实际情况来决定，要么 Scroll View 直接到顶，要么禁掉这个属性。</p>
</div></article><div class="pagination"><a class="pagination__link pagination__prev" href="/2019/11/01/%E9%85%8D%E7%BD%AE%E4%BA%86%E4%B8%AA%E5%9F%9F%E5%90%8D%EF%BC%9Acoderjerry-xyz/">prev_post</a></div></main><footer class="footer metadata"><p class="footer__text">© 2019 Jerry Hu</p><p class="footer__text">Powered by <a class="footer__text__link" href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a class="footer__text__link" href="https://pages.github.com/" target="_blank">Github Page</a></p></footer></div></body></html>